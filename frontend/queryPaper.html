<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<head>
<script>
function validateForm(){ 
   var mssv = document.forms["myForm"]["mssv"].value;
   if(mssv == ""){
     alert("MSSV must be filled out");
     return false;
   }
   var name = document.forms["myForm"]["name"].value;
   if(name == ""){
     alert("Name must be filled out");
     return false;
   }
   var year = document.forms["myForm"]["year"].value;
   if(year == ""){
     alert("Gradution year must be filled out");
     return false;
   }
   var type = document.forms["myForm"]["type"].value;
   if(type == ""){
     alert("Gradution type must be filled out");
     return false;
   }
}

function queryPaper(){
	var xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function(){
        if(this.readyState ==4 && this.status ==200){
         var result =JSON.parse(xhttp.responseText);
       	 console.log(result)
         document.forms["myForm"]["mssv"].value=result.mssv;
         document.forms["myForm"]["name"].value=result.name;
         document.forms["myForm"]["year"].value=result.year;
         document.forms["myForm"]["type"].value=result.type;
         document.forms["myForm"]["approvalStatus"].value=result.approved;
      }
    };
    var mssv = document.forms["myForm"]["mssv"].value;
    //var submit = document.forms["myForm"]["submit"].value;
//     var approved = document.forms["myForm"]["approved"].value;
//    console.log(submit);
    xhttp.open("GET","./queryPaper?mssv="+mssv,true);
    xhttp.send();
}
</script>
<style> 
input[type=text] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
}
.w3-button {width:150px;}
h3{
  font-size: 30px;
  color: #0000CC;
  text-align: center;
}
h6{
  font-size: 18px;
  color: #0000CC;
  text-align: left;
}
</style>
</head>
<body>
<h3> DIPLOMA TEXT </h3>
<h6> Query diploma text </h6>
<form method="POST" action="/" onsubmit="return validateForm()" name="myForm">
  <div class="form-group">
  	<label for="mssv">MSSV</label>
  	<input type="text" id="mssv" name="mssv">
  </div>
  <div class="form-group">
  	<label for="name">Name</label>
  	<input type="text" id="name" name="name">
  </div>
  <div class="form-group">
  	<label for="year">Gradution year</label>
  	<input type="text" id="year" name="year">
  </div>
  <div class="form-group">
  	<label for="type">Gradution Type</label>
  	<input type="text" id="type" name="type">
  </div>

  <div class="form-group">
  	<label for="type">Approval status</label>
  	<input type="text" id="idApprovalStatus" name="approvalStatus">
  </div>
</form>
 <button class="w3-button w3-blue" name="query" value="query" onclick="queryPaper()">Query</button>
</body>
</html>
